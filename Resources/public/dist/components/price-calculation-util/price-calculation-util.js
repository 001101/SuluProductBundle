define([],function(){"use strict";var a={currency:"EUR",taxRate:.2,locale:"en",unit:"pc"},b={invalidInputTranslation:"products.price-calculation.invalid.input"},c=function(a,b){return a.dom.isNumeric(b)?(b=parseFloat(b),!(isNaN(b)||!(b>=0))):!1},d=function(b,c){return b.dom.isNumeric(c)?parseFloat(c)/100:a.taxRate},e=function(a,b){return a.dom.isNumeric(b)?parseFloat(b)/100:0},f=function(a){return"en"!==a},g=function(a,b,d,e,f){return c(a,b)&&c(a,d)&&c(a,e)&&c(a,f)?!0:(a.logger.error("Invalid parameter(s) for price calculation!"),!1)},h=function(a,e){var f,g,h=0,i={taxes:{},netPrice:0,grossPrice:0};for(f in e){if(!c(a,e[f].price)||!c(a,e[f].tax))throw a.logger.error("Invalid parameter(s) for price calculation!"),new Error(a.translate(b.invalidInputTranslation));g=e[f],i.netPrice+=parseFloat(g.price),h=g.price*d(a,g.tax),h>0&&(i.taxes[g.tax]?i.taxes[g.tax]+=h:i.taxes[g.tax]=h),i.grossPrice+=g.price+h}return i};return{getFormattedGrossPrice:function(c,e,h,i){if(!g(c,e,i,0,0))return c.translate(b.invalidInputTranslation);var j,k;return e=parseFloat(e),i=d(c,i),h=h||a.currency,k=c.globalize.getLocale()||a.locale,j=e+e*i,this.getFormattedNumberWithAddition(c,j,h,f(k))},getFormattedNetPrice:function(c,e,h,i){if(!g(c,e,i,0,0))return c.translate(b.invalidInputTranslation);var j,k;return e=parseFloat(e),i=d(c,i),h=h||a.currency,k=c.globalize.getLocale()||a.locale,j=e-e*i,this.getFormattedNumberWithAddition(c,j,h,f(k))},getFormattedAmountAndUnit:function(d,e,f){return c(d,e)?(f=f||a.unit,this.getFormattedNumberWithAddition(d,e,f,!0)):(d.logger.error("Invalid parameter in getFormattedAmountAndUnit!"),d.translate(b.invalidInputTranslation))},getFormattedNumberWithAddition:function(a,b,c,d){var e=a.numberFormat(b,"n");return d?e+" "+c:c+""+e},getTotalPrice:function(c,h,i,j,k,l,m){if(!g(c,h,l,j,k))return c.translate(b.invalidInputTranslation);var n,o;return h=parseFloat(h),k=parseFloat(k),l=d(c,l),i=i||a.currency,j=e(c,j),o=c.globalize.getLocale()||a.locale,m||(h-=h*l),n=h*k,n-=n*j,this.getFormattedNumberWithAddition(c,n,i,f(o))},getTotalPricesAndTaxes:function(a,b){if(b)try{return h.call(this,a,b)}catch(c){return null}return null}}});