define([],function(){"use strict";var a={instanceName:null,currencies:null,data:[],translations:{}},b={bulkPrice:function(a){return'<div id="bulk-price-'+a+'"><form id="prices-form"></form></div>'}},c="sulu.products.price-list.",d=function(a){return c+(this.options.instanceName?this.options.instanceName+".":"")+a},e=function(){return d.call(this,"initialized")},f=function(){this.sandbox.on("sulu.products.bulk-price.changed",function(){g.call(this)},this)},g=function(){var a,b=this.sandbox.dom.children(this.$el),c=[];this.sandbox.util.foreach(b,function(b){a=this.sandbox.dom.data(b,"items"),Array.prototype.push.apply(c,a)}.bind(this)),this.sandbox.dom.data(this.$el,"prices",c)},h=function(a,b){var c=null,d=null;this.sandbox.util.foreach(b,function(b,c){return b.code===a?(d=c,!1):void 0}.bind(this)),d&&(c=b[0],b[0]=b[d],b[d]=c)},i=function(a){var b=[];return this.sandbox.util.foreach(a,function(a){b[a.currency.code]||(b[a.currency.code]=[]),b[a.currency.code].push(a)}.bind(this)),b};return{initialize:function(){this.options=this.sandbox.util.extend({},a,this.options),this.groupedPrices=[],this.options.data&&this.options.data.length>0&&(this.groupedPrices=i.call(this,this.options.data),h.call(this,this.options.defaultCurrency,this.options.currencies)),f.call(this),this.initializeBulkPriceComponents(),this.sandbox.emit(e.call(this))},initializeBulkPriceComponents:function(){var a=[];this.sandbox.util.foreach(this.options.currencies,function(c){var d=this.sandbox.dom.createElement(b.bulkPrice(c.code)),e={el:d,data:this.groupedPrices[c.code]?this.groupedPrices[c.code]:[],instanceName:c.code,currency:c};a.push({name:"bulk-price@suluproduct",options:e}),this.sandbox.dom.append(this.options.el,d)}.bind(this)),this.sandbox.start(a)}}});